{% load django_bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
{% load static %}
<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    {% block css %}{% endblock css %}
    <title>할로윈 뮤직</title>
    <link rel="shortcut icon" type="image/png" href="{% static 'img/pumpkin.png' %}"/>
  </head>
<body>
  

<!-- Ref https://www.reddit.com/r/javascript/comments/dolagh/apple_airpods_pro_page_uses_a_lot_of_images_so_i/ -->
<section>
  <video id="video" width="998" height="560" playsinline poster="https://lqez.github.io/js/airpodsvf/video.jpg">
    <source src="https://lqez.github.io/js/airpodsvf/video.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <div class="scroll-dummy">
  <h1>AirPods Pro page is TOO BIG</h1>
  <p>
    <a href="https://www.apple.com/kr/airpods-pro/">https://www.apple.com/kr/airpods-pro/</a> contains 1,500+ images and their size is over 60MiB.
  </p>
  <p>
    I encoded the first 148ea, 4.8MiB of AirPods Pro images into a single 1.1MiB x264 video file and put it as a background.
    The video file has total 148 i-frame frames by ffmpeg's <code>-intra</code> option. It makes much smoother frame changes.
  </p>
  <p>
  Image countesy of Apple, Inc.
  </p>
  </div>
  </section>

  <script>
    var FRAMES = 148;
    var FPS = 30;
    var video = document.getElementById('video');
    
    window.addEventListener('scroll', function (e) {
      var time = (window.scrollY / 1000) * FRAMES / FPS;
      video.currentTime = time;
      console.log(time);
      // alert('Hizo scroll')
    });
    
    window.addEventListener('load', function(e) {
      video.pause();
      video.currentTime = 0;
    });</script>
 
</body>
  </html>